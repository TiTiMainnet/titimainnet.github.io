"use strict";(self.webpackChunkapp_titi_frontend=self.webpackChunkapp_titi_frontend||[]).push([[1700],{31700:(un,x,s)=>{s.r(x),s.d(x,{LpminingPoolsModule:()=>E});var c=s(69808),P=s(71787),C=s(32076),n=s(5e3),y=s(65707),k=s(11730),D=s(53405),O=s(92134),Z=s(63874);function S(i,e){1&i&&(n.ynx(0),n._uU(1," \u{1f525}"),n.BQk())}const r=function(i){return{"golden-highlight":i}};function V(i,e){if(1&i&&(n.ynx(0),n.TgZ(1,"span",11),n._uU(2),n.ALo(3,"number"),n.qZA(),n.TgZ(4,"div",15),n.TgZ(5,"span",11),n._uU(6,"Trading Fee vAPY:"),n.qZA(),n.TgZ(7,"span",11),n._uU(8),n.ALo(9,"number"),n.ALo(10,"number"),n.qZA(),n.TgZ(11,"span",11),n._uU(12,"TiTi Rewards tAPY:"),n.qZA(),n.TgZ(13,"span",11),n._uU(14),n.ALo(15,"number"),n.qZA(),n.qZA(),n.BQk()),2&i){const t=e.ngIf,o=n.oxw().index;n.xp6(1),n.Q6J("ngClass",n.VKq(21,r,0==o)),n.xp6(1),n.hij("$ ",n.xi3(3,9,t.totalStakedValue,"1.2-4"),""),n.xp6(3),n.Q6J("ngClass",n.VKq(23,r,0==o)),n.xp6(2),n.Q6J("ngClass",n.VKq(25,r,0==o)),n.xp6(1),n.AsE(" Daily ",n.xi3(9,12,100*t.tradingFeeDailyApy,"1.2-4"),"% / Avg ",n.xi3(10,15,100*t.tradingFeeAvgApy,"1.2-4"),"% "),n.xp6(3),n.Q6J("ngClass",n.VKq(27,r,0==o)),n.xp6(2),n.Q6J("ngClass",n.VKq(29,r,0==o)),n.xp6(1),n.hij("",n.xi3(15,18,100*t.titiRewardAPY,"1.2-4"),"%")}}const A=function(i){return["/","lpminingPools","lpminingPool",i]};function Q(i,e){if(1&i&&(n.TgZ(0,"div",10),n.TgZ(1,"div"),n.TgZ(2,"span",11),n._uU(3),n.qZA(),n.YNc(4,S,2,0,"ng-container",12),n.qZA(),n.TgZ(5,"span",11),n._uU(6),n.qZA(),n.TgZ(7,"span",11),n._uU(8),n.qZA(),n.YNc(9,V,16,31,"ng-container",13),n.ALo(10,"async"),n.TgZ(11,"div",14),n._uU(12,"Enter"),n.qZA(),n.qZA()),2&i){const t=e.$implicit,o=e.index;n.oxw();const p=n.MAs(26);n.Q6J("routerLink",n.VKq(13,A,t.contractAddress)),n.xp6(2),n.Q6J("ngClass",n.VKq(15,r,0==o)),n.xp6(1),n.Oqu(t.name),n.xp6(1),n.Q6J("ngIf",0==o),n.xp6(1),n.Q6J("ngClass",n.VKq(17,r,0==o)),n.xp6(1),n.Oqu(t.platform),n.xp6(1),n.Q6J("ngClass",n.VKq(19,r,0==o)),n.xp6(1),n.Oqu(t.type),n.xp6(1),n.Q6J("ngIf",n.lcZ(10,11,t.poolData$))("ngIfElse",p),n.xp6(2),n.Q6J("routerLink",n.VKq(21,A,t.contractAddress))}}function J(i,e){1&i&&(n.TgZ(0,"mat-icon",16),n._uU(1," sync "),n.qZA(),n.TgZ(2,"mat-icon",16),n._uU(3," sync "),n.qZA())}function F(i,e){1&i&&(n.ynx(0),n._uU(1," \u{1f525}"),n.BQk())}function I(i,e){if(1&i&&(n.ynx(0),n.TgZ(1,"span",11),n._uU(2),n.ALo(3,"number"),n.qZA(),n.TgZ(4,"div",19),n.TgZ(5,"span",11),n._uU(6,"Total Reward Apy:"),n.qZA(),n.TgZ(7,"span",11),n._uU(8),n.ALo(9,"number"),n.ALo(10,"number"),n.qZA(),n.qZA(),n.BQk()),2&i){const t=n.oxw().ngIf,o=n.oxw().index;n.xp6(1),n.Q6J("ngClass",n.VKq(15,r,0==o)),n.xp6(1),n.hij("$ ",n.xi3(3,6,t.tvl,"1.2-4"),""),n.xp6(3),n.Q6J("ngClass",n.VKq(17,r,0==o)),n.xp6(2),n.Q6J("ngClass",n.VKq(19,r,0==o)),n.xp6(1),n.AsE("",n.xi3(9,9,t.apr[0],"1.2-4"),"% - ",n.xi3(10,12,t.apr[1],"1.2-4"),"%")}}function j(i,e){if(1&i&&(n.ynx(0),n._UZ(1,"span"),n.TgZ(2,"span"),n._uU(3),n.qZA(),n.BQk()),2&i){const t=n.oxw(2).$implicit;n.xp6(3),n.hij("Please Check in ",t.platform,"")}}function Y(i,e){if(1&i&&(n.ynx(0),n.YNc(1,I,11,21,"ng-container",12),n.YNc(2,j,4,1,"ng-container",12),n.BQk()),2&i){const t=e.ngIf;n.xp6(1),n.Q6J("ngIf",null!=t.tvl),n.xp6(1),n.Q6J("ngIf",null==t.tvl)}}function K(i,e){if(1&i){const t=n.EpF();n.TgZ(0,"div",17),n.NdJ("click",function(){const a=n.CHM(t).$implicit;return n.oxw().openUrl(a.url)}),n.TgZ(1,"div"),n.TgZ(2,"span",11),n._uU(3),n.qZA(),n.YNc(4,F,2,0,"ng-container",12),n.qZA(),n.TgZ(5,"span",11),n._uU(6),n.qZA(),n.TgZ(7,"span",11),n._uU(8),n.qZA(),n.YNc(9,Y,3,2,"ng-container",13),n.ALo(10,"async"),n.TgZ(11,"div",18),n._uU(12," Go "),n.qZA(),n.qZA()}if(2&i){const t=e.$implicit,o=e.index;n.oxw();const p=n.MAs(26);n.xp6(2),n.Q6J("ngClass",n.VKq(11,r,0==o)),n.xp6(1),n.Oqu(t.name),n.xp6(1),n.Q6J("ngIf",0==o),n.xp6(1),n.Q6J("ngClass",n.VKq(13,r,0==o)),n.xp6(1),n.Oqu(t.platform),n.xp6(1),n.Q6J("ngClass",n.VKq(15,r,0==o)),n.xp6(1),n.Oqu(t.type),n.xp6(1),n.Q6J("ngIf",n.lcZ(10,9,t.externalLpminingPoolData$))("ngIfElse",p)}}const B=[{path:"",component:(()=>{class i{constructor(t,o,p){this.chainInfoService=t,this.web3Service=o,this.graphService=p,this.lpPoolMap=this.chainInfoService.getChainConfig().lpminingPools,this.lpPools=Object.keys(this.lpPoolMap).map(a=>Object.assign(Object.assign({},this.lpPoolMap[a]),{poolData$:(0,C.D)(this.fetchLPTokenData(this.lpPoolMap[a].contractAddress,this.lpPoolMap[a].pairAddress,this.lpPoolMap[a].type,this.lpPoolMap[a].anotherTokenDecimals))})),this.externalLpminingPools=this.chainInfoService.getChainConfig().externalLpminingPools.map(a=>{const d=(0,C.D)(this.fetchExternalLpminingPoolData(a));return Object.assign(Object.assign({},a),{externalLpminingPoolData$:d})})}openUrl(t){window.open(t)}ngOnInit(){}fetchExternalLpminingPoolData(t){return t.api?fetch(t.api).then(o=>o.json()).then(o=>o.data.data.find(p=>p.pool_address.toLowerCase()==t.address.toLowerCase())):Promise.resolve({})}fetchTiTiPrice(){return Promise.all([this.web3Service.invokeContract("UniswapV2Pair","getReserves",[]),this.graphService.fetchTodayMMFRewardData(this.chainInfoService.getChainConfig().contractAddressMap.MAMMSwapPair)]).then(t=>{const o=this.chainInfoService.getChainConfig().isTiUSDToken0;return t[1].data.pair.fund1*10**12/t[1].data.pair.fund0*(o?t[0][0]/t[0][1]:t[0][1]/t[0][0])})}fetchLPTokenData(t,o,p,a){return Promise.all([this.web3Service.invokeContract("MAMMSwapPair","getDepth",[]),this.web3Service.invokeContract("UniswapV2Pair","totalSupply",[],o),this.web3Service.invokeContract("LPStakingPool","totalSupply",[],t),this.web3Service.invokeContract("UniswapV2Pair","getReserves",[],o),this.web3Service.invokeContract("UniswapV2Pair","token0",[],o),this.web3Service.invokeContract("LPStakingPool","rewardRate",[],t),this.web3Service.invokeContract("LPStakingPool","startTime",[],t),this.web3Service.invokeContract("LPStakingPool","periodFinish",[],t),this.fetchTiTiPrice(),this.graphService.fetchTradingFee(o)]).then(([d,N,z,l,H,X,G,W,nn,{data:tn}])=>{const u=d[1]/10**6/(d[0]/10**18),f=N[0],h=z[0],g=this.chainInfoService.getChainConfig().contractAddressMap.TiUSD.toLowerCase()==H[0].toLowerCase(),w=g?l[0]:l[1];let m=0;m="Stable"==p?f>0?(g?l[0]/10**18+l[1]/10**a:l[0]/10**a+l[1]/10**18)/(f/10**18):0:f>0?2*w*u/f:0;const v=h/10**18*m,L=(new Date).getTime()/1e3,an=v>0?(L>W[0]||L<G[0]?0:X[0]/10**18)*nn*86400*365/v:0,M=g?u:l[1]/10**18*u/(l[0]/10**this.lpPoolMap[t].anotherTokenDecimals),q=g?l[0]/10**this.lpPoolMap[t].anotherTokenDecimals*u/(l[1]/10**18):u,{dailyTradeVolume:T,totalTradeVolume:_}=tn,{feeVolume0:rn,feeVolume1:sn}=null!=T?T:{feeVolume0:"0",feeVolume1:"0"},{totalFeeVolume0:pn,totalFeeVolume1:ln}=null!=_?_:{totalFeeVolume0:"0",totalFeeVolume1:"0"},U=g?18:this.lpPoolMap[t].anotherTokenDecimals,b=g?this.lpPoolMap[t].anotherTokenDecimals:18;return{liquidity:f,totalStakedLPToken:h,pairTiUSDFund:w,lpTokenPrice:m,totalStakedValue:v,titiRewardAPY:an,tradingFeeDailyApy:365*(rn/10**U*M+sn/10**b*q)/(h/10**18*m),tradingFeeAvgApy:365*(pn/10**U*M+ln/10**b*q)*86400*1e3/(h/10**18*m*((new Date).getTime()-this.chainInfoService.getChainConfig().startTime))}})}}return i.\u0275fac=function(t){return new(t||i)(n.Y36(y.Z),n.Y36(k.Uc),n.Y36(D.h))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-lpmining-pools"]],decls:28,vars:2,consts:[[1,"lpmining-pools-wrapper"],[1,"page-title"],["href","https://docs.titi.finance/titi-tokenomics/titi-incentive/tiusd-x-token-liquidity-provider","target","_blank"],[1,"lpmining-pools-card","mat-elevation-z4"],[1,"lpmining-pool-header"],["text","\u25cb Fluctuation: A trading pair consisting of TiUSD and volatile assets, with high price fluctuations, impermanent losses may occur.\n                    \u25cb Stable: A trading pair composed of TUSD and stable assets, with low price fluctuations and minimal impermanent losses."],[1,"divider",2,"margin","0.5rem 0"],["class","lpmining-pool-item",3,"routerLink",4,"ngFor","ngForOf"],["loadingTemplate",""],["class","lpmining-pool-item",3,"click",4,"ngFor","ngForOf"],[1,"lpmining-pool-item",3,"routerLink"],[3,"ngClass"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"enter-btn",3,"routerLink"],[2,"display","grid","grid-template-columns","auto auto","column-gap","1vw","justify-items","start","align-items","center","row-gap","0.5rem"],["color","primary","matListIcon","",1,"fa-spin"],[1,"lpmining-pool-item",3,"click"],[1,"enter-btn"],[2,"display","grid","grid-template-columns","auto auto","column-gap","1vw","justify-items","start","align-items","center"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"h1"),n._uU(3,"TiUSD - XToken LP Mining Pools"),n.qZA(),n.TgZ(4,"p"),n._uU(5,"LP mining rewards are $TiTi and Trading fee. Choose a trading pair on the mainstream DEX and Provide TiUSD/xToken Liquidity based on your experience. "),n.TgZ(6,"a",2),n._uU(7,"Click to Learn More"),n.qZA(),n._uU(8,"."),n.qZA(),n.qZA(),n.TgZ(9,"div",3),n.TgZ(10,"div",4),n.TgZ(11,"span"),n._uU(12,"Assets"),n.qZA(),n.TgZ(13,"span"),n._uU(14,"Platform"),n.qZA(),n.TgZ(15,"span"),n._uU(16,"Pair Type"),n._UZ(17,"titi-tooltip",5),n.qZA(),n.TgZ(18,"span"),n._uU(19,"Total Staked Value"),n.qZA(),n.TgZ(20,"span"),n._uU(21,"APY"),n.qZA(),n._UZ(22,"span"),n.qZA(),n._UZ(23,"div",6),n.YNc(24,Q,13,23,"div",7),n.YNc(25,J,4,0,"ng-template",null,8,n.W1O),n.YNc(27,K,13,17,"div",9),n.qZA(),n.qZA()),2&t&&(n.xp6(24),n.Q6J("ngForOf",o.lpPools),n.xp6(3),n.Q6J("ngForOf",o.externalLpminingPools))},directives:[O.Q,c.sg,P.rH,c.mk,c.O5,Z.Hw],pipes:[c.Ov,c.JJ],styles:[".lpmining-pools-wrapper[_ngcontent-%COMP%]{padding:24px}.lpmining-pools-card[_ngcontent-%COMP%]{width:100%;margin-top:2vw}.lpmining-pool-header[_ngcontent-%COMP%]{width:100%;grid-column-start:span 5;display:grid;padding:.5rem 1rem;grid-template-columns:2fr 2fr 2fr 3fr 5fr 1fr;grid-column-gap:1rem;column-gap:1rem;grid-row-gap:1rem;row-gap:1rem;justify-items:start;align-items:center;font-size:1vw;font-weight:700}.lpmining-pool-item[_ngcontent-%COMP%]{width:100%;min-height:45px;grid-column-start:span 5;display:grid;padding:.5rem 1rem;grid-template-columns:2fr 2fr 2fr 3fr 5fr 1fr;grid-column-gap:1rem;column-gap:1rem;grid-row-gap:1rem;row-gap:1rem;justify-items:start;align-items:center;cursor:pointer;border-radius:1rem;box-shadow:0 0 2px 2px #b8fff900;margin-top:.5rem;font-size:.8vw}.lpmining-pool-item[_ngcontent-%COMP%]:hover{background:rgba(171,237,231,.2);box-shadow:0 0 2px 2px #7ee8df80}.titi-dark-theme[_nghost-%COMP%]   .lpmining-pool-item[_ngcontent-%COMP%], .titi-dark-theme   [_nghost-%COMP%]   .lpmining-pool-item[_ngcontent-%COMP%]{box-shadow:0 0 2px 2px #b8fff900}.titi-dark-theme[_nghost-%COMP%]   .lpmining-pool-item[_ngcontent-%COMP%]:hover, .titi-dark-theme   [_nghost-%COMP%]   .lpmining-pool-item[_ngcontent-%COMP%]:hover{background:rgba(184,255,249,.2);box-shadow:0 0 2px 2px #b8fff980}.enter-btn[_ngcontent-%COMP%]{border:1px solid #005740;border-radius:.5rem;padding:.1rem 1rem;font-size:1rem;color:#005740;cursor:pointer;justify-self:end;width:5rem;display:flex;justify-content:center;align-items:center}.enter-btn[_ngcontent-%COMP%]:hover{color:#26ad89;border:1px solid #36cea6}.titi-dark-theme[_nghost-%COMP%]   .enter-btn[_ngcontent-%COMP%], .titi-dark-theme   [_nghost-%COMP%]   .enter-btn[_ngcontent-%COMP%]{border:1px solid #beffe7;color:#beffe7}.titi-dark-theme[_nghost-%COMP%]   .enter-btn[_ngcontent-%COMP%]:hover, .titi-dark-theme   [_nghost-%COMP%]   .enter-btn[_ngcontent-%COMP%]:hover{color:#beffe7;border:1px solid #beffe7}"]}),i})()}];let R=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[P.Bz.forChild(B)],P.Bz]}),i})();var $=s(87841);let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[c.ez,R,Z.Ps,$.m]]}),i})()}}]);