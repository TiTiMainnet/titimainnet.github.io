"use strict";(self.webpackChunkapp_titi_frontend=self.webpackChunkapp_titi_frontend||[]).push([[590],{28321:(_,D,s)=>{function v(){const r=(new Date).getTime(),l=[];let n=36e5*parseInt(r/36e5+"");for(let o=0;o<720;o++)l.push(n),n-=36e5;return l}function f(){const r=(new Date).getTime(),l=[];let n=864e5*parseInt(r/864e5+"");for(let o=0;o<30;o++)l.push(n),n-=864e5;return l}function P(){const r=(new Date).getTime();return 86400*parseInt(r/864e5+"")-2592e3}function t(u){return u>0?[parseInt(u/864e5+"")+"d",parseInt(u%864e5/36e5+"")+"h",parseInt(u%36e5/6e4+"")+"m",parseInt(u%6e4/1e3+"")+"s"].join(":"):[" -- d"," -- h"," -- m"," -- s"].join(":")}function S(u){let r=u;const l=r.substring(0,1),n=r.substring(1,2);if(r.length>1&&"0"===l&&"."!==n&&(r=r.substring(1,2)),"."===l&&(r=""),-1!==r.indexOf(".")){let o=r.substring(r.indexOf(".")+1);-1!==o.indexOf(".")&&(r=r.substring(0,r.indexOf(".")+o.indexOf(".")+1))}return r=r.replace(/[^\d^\.]+/g,""),r}s.d(D,{jn:()=>v,Gq:()=>f,Mv:()=>P,lR:()=>t,Y4:()=>S})},40590:(_,D,s)=>{s.r(D),s.d(D,{MyAccountModule:()=>ct});var v=s(69808),f=s(71787),P=s(98538),d=s.n(P),t=s(5e3),S=s(65707),k=s(11730),u=s(57610),r=s(32681),l=s(31657),n=s(53405),o=s(47423),A=s(92134),h=s(32075),q=s(75303);function Z(e,c){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Act."),t.qZA())}function O(e,c){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const i=c.$implicit;t.xp6(1),t.Oqu(i.act)}}function I(e,c){1&e&&(t.TgZ(0,"th",27),t._uU(1,"Your Staked Value"),t.qZA())}function $(e,c){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"numberFormat"),t.qZA()),2&e){const i=c.$implicit;t.xp6(1),t.hij("$ ",t.xi3(2,1,i.staked,4),"")}}function L(e,c){1&e&&(t.TgZ(0,"th",27),t._uU(1,"Claimable TiTi"),t.qZA())}function B(e,c){1&e&&t._UZ(0,"titi-tooltip",30)}function E(e,c){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"numberFormat"),t.YNc(3,B,1,0,"titi-tooltip",29),t.qZA()),2&e){const i=c.$implicit;t.xp6(1),t.hij("",t.xi3(2,2,i.reward,4)," "),t.xp6(2),t.Q6J("ngIf","TiTi Staking"===i.act)}}function N(e,c){1&e&&(t.TgZ(0,"th",27),t._uU(1,"Dynamic APY"),t.qZA())}function F(e,c){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"numberFormat"),t.qZA()),2&e){const i=c.$implicit;t.xp6(1),t.hij("",t.xi3(2,1,i.apy,4),"%")}}function Y(e,c){1&e&&t._UZ(0,"tr",31)}function H(e,c){if(1&e){const i=t.EpF();t.TgZ(0,"tr",32),t.NdJ("click",function(){const p=t.CHM(i).$implicit;return t.oxw().onRowClick(p)}),t.qZA()}}function Q(e,c){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Act."),t.qZA())}function z(e,c){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const i=c.$implicit;t.xp6(1),t.Oqu(i.act)}}function V(e,c){1&e&&(t.TgZ(0,"th",27),t._uU(1,"Total Rewards"),t.qZA())}function j(e,c){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"numberFormat"),t.qZA()),2&e){const i=c.$implicit;t.xp6(1),t.hij("",t.xi3(2,1,i.total,4)," TiTi")}}function W(e,c){1&e&&(t.TgZ(0,"th",27),t._uU(1,"Distributed Rewards"),t.qZA())}function J(e,c){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"numberFormat"),t.qZA()),2&e){const i=c.$implicit;t.xp6(1),t.hij("",t.xi3(2,1,i.personal,4)," TiTi")}}function G(e,c){1&e&&(t.TgZ(0,"th",27),t._uU(1,"Expected Daily Rewards"),t.qZA())}function K(e,c){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.ALo(2,"numberFormat"),t.qZA()),2&e){const i=c.$implicit;t.xp6(1),t.hij("",t.xi3(2,1,i.rate,4)," TiTi/Day")}}function X(e,c){1&e&&t._UZ(0,"tr",31)}function tt(e,c){if(1&e){const i=t.EpF();t.TgZ(0,"tr",32),t.NdJ("click",function(){const p=t.CHM(i).$implicit;return t.oxw().onRowClick(p)}),t.qZA()}}let et=(()=>{class e{constructor(i,a,m,p,y,T,g){this.chainInfoService=i,this.router=a,this.web3Service=m,this.accountService=p,this.use2earnService=y,this.refreshService=T,this.graphService=g,this.displayedColumns1=["act","staked","reward","apy"],this.displayedColumns2=["act","total","personal","rate"],this.dataSource1=[],this.dataSource2=[],this.buyTiUSDReward=b,this.buyTiUSDPersonalReward=0,this.buyTiUSDRewardRate=b/M,this.buyTiUSDPersonalRewardRate=0,this.holdTiUSDReward=R,this.holdTiUSDPersonalReward=0,this.holdTiUSDRewardRate=R/M,this.holdTiUSDPersonalRewardRate=0,this.buyTiTiReward=U,this.buyTiTiPersonalReward=0,this.buyTiTiRewardRate=U/M,this.buyTiTiPersonalRewardRate=0,this.totalClaimableRewards=0,this.distributedTiTiRewards=0,this.usdcMmfStaked=0,this.usdcMmfReward=0,this.usdcMmfApy=0,this.lpMiningStaked=0,this.lpMiningReward=0,this.lpMiningApy=0,this.LPTokenPrice=0,this.titiStakingStaked=0,this.titiStakingReward=0,this.titiStakingApy=0,this.titiPrice=0,this.clickedRows=new Set,this.TiUSDBalance=0,this.TiTiBalance=0,this.mmfDecimal1=6,this.lpminingDecimal1=18}ngOnInit(){this.initData(),this.unregister=this.refreshService.registerFunction(()=>this.initData())}ngOnDestroy(){this.unregister()}initData(){this.fetchBalanceOfTiUSD(),this.fetchBalanceOfTiTi(),Promise.all([this.use2earnService.fetchUserData(),this.fetchMMFData().then(()=>this.fetchLpMiningData()),this.fetchTiTiStakingData()]).then(()=>this.buildDataSource())}fetchBalanceOfStakedLPToken(){return this.accountService.getCurrentAccountAsyn().then(i=>this.web3Service.invokeContract("MMFLPStakingPool","balanceOf",[i]).then(a=>this.web3Service.invokeContract("MarketMakerFund","getShareValue",[a[0]])))}fetchMMFData(){return this.accountService.getCurrentAccountAsyn().then(i=>Promise.all([this.fetchBalanceOfStakedLPToken(),this.web3Service.invokeContract("MMFLPStakingPool","rewardRate",[]),this.web3Service.invokeContract("MMFLPStakingPool","earned",[i]),this.web3Service.invokeContract("UniswapV2Pair","getReserves",[]),this.graphService.fetchTodayMMFRewardData(this.chainInfoService.getChainConfig().contractAddressMap.MAMMSwapPair),this.web3Service.invokeContract("MMFLPStakingPool","startTime",[]),this.web3Service.invokeContract("MMFLPStakingPool","periodFinish",[])]).then(a=>{const m=(new Date).getTime()/1e3;this.usdcMmfStaked=a[0][0]/10**this.mmfDecimal1;const p=m>a[6][0]||m<a[5][0]?0:a[1][0];this.usdcMmfReward=a[2][0]/10**18;const T=a[4].data.pair.fund0,g=a[4].data.pair.fund1,w=a[4].data.pairDailyData?a[4].data.pairDailyData.mmfFund1:0;this.usdcMmfApy=0==w?0:365*(a[3][1]/a[3][0]*(g*10**12/T)*p*3600*24/10**18+(a[4].data.mmfrewardDailyData?a[4].data.mmfrewardDailyData.mmfReward:0)/10**this.mmfDecimal1)*100/(w/10**this.mmfDecimal1),this.titiPrice=a[3][1]/a[3][0]*(g*10**12/T)}))}fetchLpMiningData(){return this.accountService.getCurrentAccountAsyn().then(i=>Promise.all([this.web3Service.invokeContract("LPStakingPool","balanceOf",[i]),this.web3Service.invokeContract("LPStakingPool","earned",[i]),this.web3Service.invokeContract("LPStakingPool","rewardRate",[]),this.web3Service.invokeContract("UniswapV2Pair","getReserves",[]),this.web3Service.invokeContract("LPStakingPool","totalSupply",[]),this.web3Service.invokeContract("LPStakingPool","startTime",[]),this.web3Service.invokeContract("LPStakingPool","periodFinish",[]),this.web3Service.invokeContract("MAMMSwapPair","getDepth",[]),this.web3Service.invokeContract("UniswapV2Pair","totalSupply",[])]).then(a=>{const m=(new Date).getTime()/1e3;this.lpMiningStaked=a[0][0]/10**this.lpminingDecimal1,this.lpMiningReward=a[1][0]/10**18;const p=m>a[6][0]||m<a[5][0]?0:a[2][0];this.LPTokenPrice=a[8][0]>0?2*a[3][1]*(a[7][1]/10**6/(a[7][0]/10**18))/a[8][0]:0,this.lpMiningApy=1*a[4][0]>0?this.titiPrice*p*3600*24*365*100/(a[4][0]*this.LPTokenPrice):0}))}fetchTiTiStakingData(){return this.accountService.getCurrentAccountAsyn().then(i=>Promise.all([this.web3Service.invokeContract("TiTiStaking","getStakeValue",[i]),this.web3Service.invokeContract("TiTiStaking","users",[i]),this.web3Service.invokeContract("TiTiStaking","WITHDRAW_DURATION",[]),this.web3Service.invokeContract("TiTiStaking","UNBONDING_DURATION",[]),this.graphService.fetchTiTiStakingDailyData(),this.web3Service.invokeContract("TiTiBackendV1","epochNum",[])]).then(([a,m,p,y,T,g])=>{const w=new(d())(m.share),x=new(d())(m.unbondShare);1e3*m.unbondTime+1e3*y[0]<=(new Date).getTime()?this.titiStakingReward=w.isZero()?0:new(d())(a[0]/10**18).mul(x).div(w).toNumber():w.isZero()||new(d())(a[0]/10**18).mul(x).div(w).toNumber(),this.titiStakingStaked=a[0]/10**18,this.titiStakingApy=T.data.tiTiStakingEpochDailyDatas[0]&&T.data.tiTiStakingEpochDailyDatas[0].epoch.id==g[0]?100*T.data.tiTiStakingEpochDailyDatas[0].apy:0}))}fetchBalanceOfTiUSD(){this.accountService.getCurrentAccountAsyn().then(i=>this.web3Service.invokeContract("TiUSD","balanceOf",[i]).then(a=>{this.TiUSDBalance=a[0]/10**18}))}fetchBalanceOfTiTi(){this.accountService.getCurrentAccountAsyn().then(i=>this.web3Service.invokeContract("TiTiToken","balanceOf",[i]).then(a=>{this.TiTiBalance=a[0]/10**18}))}rewardPerToken(i){if(0===Number.parseInt(i.totalSupply))return new(d())(i.rewardPerTokenStored);const a=new(d())(this.lastTimeRewardApplicable()-1*i.lastUpdateTime).mul(new(d())(this.holdTiUSDRewardRate).mul(new(d())("1000000000000000000"))).mul(new(d())("1000000000000000000")).div(new(d())(i.totalSupply).mul(new(d())(86400)));return new(d())(i.rewardPerTokenStored).add(a)}lastTimeRewardApplicable(){let i;const a=(new Date).getTime();return i=a<C?C:a<C+24*M*3600*1e3?a:C+24*M*3600*1e3,i/1e3}buildDataSource(){this.dataSource1=[{act:"USDC-MMF",staked:this.usdcMmfStaked,reward:this.usdcMmfReward,apy:this.usdcMmfApy,url:"/mmf"},{act:"LP Mining",staked:this.lpMiningStaked*this.LPTokenPrice,reward:this.lpMiningReward,apy:this.lpMiningApy,url:"/lpmining"},{act:"TiTi Staking",staked:this.titiStakingStaked*this.titiPrice,reward:this.titiStakingStaked,apy:this.titiStakingApy,url:"/titiStaking"}],this.dataSource2=[{act:"Buy TiUSD in TiTi-AMMs (Swap)",total:this.use2earnService.buyTiUSDReward,personal:this.use2earnService.buyTiUSDPersonalReward-this.use2earnService.buyTiUSDPersonalRewardRate>0?this.use2earnService.buyTiUSDPersonalReward-this.use2earnService.buyTiUSDPersonalRewardRate:0,rate:this.use2earnService.buyTiUSDPersonalRewardRate,url:"/use2earn/activity/buyTiUSD"},{act:"TiUSD Holder",total:this.use2earnService.holdTiUSDReward,personal:this.use2earnService.holdTiUSDPersonalReward,rate:this.use2earnService.holdTiUSDPersonalRewardRate,url:"/use2earn/activity/holdTiUSD"},{act:"Buy TiTi in Uniswap",total:this.use2earnService.buyTiTiReward,personal:this.use2earnService.buyTiTiPersonalReward-this.use2earnService.buyTiTiPersonalRewardRate>0?this.use2earnService.buyTiTiPersonalReward-this.use2earnService.buyTiTiPersonalRewardRate:0,rate:this.use2earnService.buyTiTiPersonalRewardRate,url:"/use2earn/activity/buyTiTi"}]}onRowClick(i){this.router.navigateByUrl(i.url)}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(S.Z),t.Y36(f.F0),t.Y36(k.Uc),t.Y36(u.B),t.Y36(r.Q),t.Y36(l.g),t.Y36(n.h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-my-account"]],decls:60,vars:14,consts:[[1,"my-account-wrapper"],[1,"mat-elevation-z4","biz-info-card"],[1,"title"],[1,"value"],["routerLink","/swap","mat-raised-button","","color","primary",1,"action-btn"],["href","https://app.uniswap.org/#/swap?inputCurrency=0x6EFF556748Ee452CbDaf31bcb8c76A28651509bd&outputCurrency=0x3bdffA70f4b4E6985eED50453c7C0D4A15dcEc52","target","_blank",1,"action-btn"],["mat-raised-button","","color","primary",2,"width","100%"],["text","Coming Soon ~"],[1,"mat-elevation-z4","farm-table-wrapper"],["mat-table","",1,"farm-table",3,"dataSource"],["matColumnDef","act"],["mat-header-cell","","style","width:19%",4,"matHeaderCellDef"],["mat-cell","","style","width:19%",4,"matCellDef"],["matColumnDef","staked"],["mat-header-cell","","style","width:27%",4,"matHeaderCellDef"],["mat-cell","","style","width:27%",4,"matCellDef"],["matColumnDef","reward"],["matColumnDef","apy"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"mat-elevation-z4","use2earn-table-wrapper"],["mat-table","",1,"use2earn-table",3,"dataSource"],["matColumnDef","total"],["matColumnDef","personal"],["matColumnDef","rate"],["mat-header-cell","",2,"width","19%"],["mat-cell","",2,"width","19%"],["mat-header-cell","",2,"width","27%"],["mat-cell","",2,"width","27%"],["text","Your Staked TiTi Principal  + Compound Staking Rewards",4,"ngIf"],["text","Your Staked TiTi Principal  + Compound Staking Rewards"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h2",2),t._uU(3,"TiUSD Balance"),t.qZA(),t.TgZ(4,"span",3),t._uU(5),t.ALo(6,"numberFormat"),t.qZA(),t.TgZ(7,"button",4),t._uU(8,"BUY"),t.qZA(),t.qZA(),t.TgZ(9,"div",1),t.TgZ(10,"h2",2),t._uU(11,"TiTi Balance"),t.qZA(),t.TgZ(12,"span",3),t._uU(13),t.ALo(14,"numberFormat"),t.qZA(),t.TgZ(15,"a",5),t.TgZ(16,"button",6),t._uU(17,"BUY"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",1),t.TgZ(19,"h2",2),t._uU(20,"Your Account Level"),t.qZA(),t.TgZ(21,"span",3),t._uU(22,"Lv. - - "),t._UZ(23,"titi-tooltip",7),t.qZA(),t.qZA(),t.TgZ(24,"div",8),t.TgZ(25,"h2"),t._uU(26,"Farm List"),t.qZA(),t.TgZ(27,"table",9),t.ynx(28,10),t.YNc(29,Z,2,0,"th",11),t.YNc(30,O,2,1,"td",12),t.BQk(),t.ynx(31,13),t.YNc(32,I,2,0,"th",14),t.YNc(33,$,3,4,"td",15),t.BQk(),t.ynx(34,16),t.YNc(35,L,2,0,"th",14),t.YNc(36,E,4,5,"td",15),t.BQk(),t.ynx(37,17),t.YNc(38,N,2,0,"th",14),t.YNc(39,F,3,4,"td",15),t.BQk(),t.YNc(40,Y,1,0,"tr",18),t.YNc(41,H,1,0,"tr",19),t.qZA(),t.qZA(),t.TgZ(42,"div",20),t.TgZ(43,"h2"),t._uU(44,"Use-To-Earn List"),t.qZA(),t.TgZ(45,"table",21),t.ynx(46,10),t.YNc(47,Q,2,0,"th",11),t.YNc(48,z,2,1,"td",12),t.BQk(),t.ynx(49,22),t.YNc(50,V,2,0,"th",14),t.YNc(51,j,3,4,"td",15),t.BQk(),t.ynx(52,23),t.YNc(53,W,2,0,"th",14),t.YNc(54,J,3,4,"td",15),t.BQk(),t.ynx(55,24),t.YNc(56,G,2,0,"th",14),t.YNc(57,K,3,4,"td",15),t.BQk(),t.YNc(58,X,1,0,"tr",18),t.YNc(59,tt,1,0,"tr",19),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(5),t.Oqu(t.xi3(6,8,a.TiUSDBalance,4)),t.xp6(8),t.Oqu(t.xi3(14,11,a.TiTiBalance,4)),t.xp6(14),t.Q6J("dataSource",a.dataSource1),t.xp6(13),t.Q6J("matHeaderRowDef",a.displayedColumns1),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns1),t.xp6(4),t.Q6J("dataSource",a.dataSource2),t.xp6(13),t.Q6J("matHeaderRowDef",a.displayedColumns2),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns2))},directives:[o.lW,f.rH,A.Q,h.BZ,h.w1,h.fO,h.Dz,h.as,h.nj,h.ge,h.ev,v.O5,h.XQ,h.Gk],pipes:[q.p],styles:[".mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{border-color:#1de9b6}.my-account-wrapper[_ngcontent-%COMP%]{padding:12px;display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr 1fr;align-items:center;grid-column-gap:24px;column-gap:24px;grid-row-gap:24px;row-gap:24px}.biz-info-card[_ngcontent-%COMP%]{min-height:80px;padding:18px;grid-column-start:span 2;display:grid;grid-template-columns:1fr 1fr 1fr}.biz-info-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{grid-column-start:span 3;margin-left:48px;margin-bottom:20px}.biz-info-card[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{grid-column-start:span 2;margin-left:48px;align-self:end;font-size:18px;line-height:36px}.biz-info-card[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{grid-column-start:span 1}.use2earn-table-wrapper[_ngcontent-%COMP%]{grid-column-start:span 6;padding:12px;display:flex;align-items:center;flex-direction:column;min-height:240px}.use2earn-table[_ngcontent-%COMP%]{width:100%;background:transparent}.farm-table-wrapper[_ngcontent-%COMP%]{grid-column-start:span 6;padding:12px;display:flex;align-items:center;flex-direction:column;min-height:240px}.farm-table[_ngcontent-%COMP%]{width:100%;background:transparent}@media screen and (max-width: 1024px){.my-account-wrapper[_ngcontent-%COMP%]{grid-row-gap:12px;row-gap:12px;width:100%;padding:12px}.biz-info-card[_ngcontent-%COMP%]{grid-column-start:span 6}}"]}),e})();const C=16799184e5,M=21,b=15e4,R=15e4,U=15e4,it=[{path:"",component:et}];let at=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.Bz.forChild(it)],f.Bz]}),e})();var nt=s(87238),rt=s(63874),ot=s(87841);let ct=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[v.ez,at,h.p0,o.ot,nt.AV,rt.Ps,ot.m]]}),e})()},53405:(_,D,s)=>{s.d(D,{h:()=>u});var v=s(57959),f=s(94528),P=s(57424),d=s(32856),t=s(28321),S=s(5e3),k=s(65707);let u=(()=>{class r{constructor(n){this.chainInfoService=n,this.APIURL="https://api.thegraph.com/subgraphs/name/titimainnet/titi-mainnet",this.client=new v.f({uri:this.APIURL,cache:new f.h}),this.chainInfoService.currentChainId$.subscribe(o=>{this.setNewApi(this.chainInfoService.getChainConfig(o).subgraphApi)})}setNewApi(n){this.client.setLink(new P.u({uri:n}))}fetchMMFSwapPairHourData(n){return this.client.query({query:(0,d.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        pairHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n        }\n     }\n   }\n  "),variables:{id:n.toLowerCase(),time:(0,t.Mv)()},fetchPolicy:"network-only"})}fetchMMFSwapPairDailyData(n){return this.client.query({query:(0,d.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        pairDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          mmfFund0\n          mmfFund1\n          token0Price\n          token1Price\n        }\n     }\n   }\n  "),variables:{id:n.toLowerCase(),time:(0,t.Mv)()},fetchPolicy:"network-only"})}fetchAllSwapPairDailyData(){return this.client.query({query:(0,d.Ps)("\n    query($time:Int) {\n      pairs(orderBy: id,orderDirection: desc) {\n        id\n        fund0\n        fund1\n        prv\n        token1{\n          symbol\n          decimals\n        }\n        token0Twap\n        pairDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n          token0Twap\n          prv\n        }\n        pairHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n          token0Twap\n          prv\n        }\n     }\n   }\n  "),variables:{time:(0,t.Mv)()},fetchPolicy:"network-only"})}fetchUniwapPairDailyData(){return this.client.query({query:(0,d.Ps)("\n    query($id: ID,$time:Int) {\n      uniswapPair(id:$id) {\n        fund0\n        fund1\n        liquidity\n        dailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          liquidity\n        }\n     }\n   }\n  "),variables:{id:this.chainInfoService.getChainConfig().contractAddressMap.UniswapV2Pair.toLowerCase(),time:(0,t.Mv)()},fetchPolicy:"network-only"})}fetchDailyLPTokenStakedValue(){return this.client.query({query:(0,d.Ps)("\n    query($time:Int) \n    {\n        dailyLPStakings(where: {dayTimestamp_gt: $time},orderBy: dayTimestamp,orderDirection: desc)  {\n          id\n          dayTimestamp\n          stakedValue\n        }\n   }\n  "),variables:{id:this.chainInfoService.getChainConfig().contractAddressMap.UniswapV2Pair.toLowerCase(),time:(0,t.Mv)()},fetchPolicy:"network-only"})}fetchMMFRewardDailyData(n){return this.client.query({query:(0,d.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        mmfRewardDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          mmfReward\n        }\n     }\n   }\n  "),variables:{id:n.toLowerCase(),time:(0,t.Mv)()},fetchPolicy:"network-only"})}fetchTodayMMFRewardData(n){return this.client.query({query:(0,d.Ps)("\n    query($id: ID,$pairId:ID) {\n      mmfrewardDailyData(id:$id) {\n        id\n        dayStartTimestamp\n        mmfReward\n      }\n      pair(id:$pairId) {\n        id\n        fund0\n        fund1\n      }\n      pairDailyData(id:$id) {\n        id\n        mmfFund1\n      }\n   }\n  "),variables:{id:n.toLowerCase()+"-"+Number.parseInt((new Date).getTime()/864e5+""),pairId:n.toLowerCase()},fetchPolicy:"network-only"})}fetchMMFRewardHourDataIn24H(n){return this.client.query({query:(0,d.Ps)("\n    query($id: ID,$time: Int) {\n      pair(id:$id) {\n        id\n        mmfRewardHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          mmfReward\n        }\n     }\n   }\n  "),variables:{id:n.toLowerCase(),time:Number.parseInt((new Date).getTime()/1e3-86400+"")},fetchPolicy:"network-only"})}fetchTiTiStakingDailyData(){return this.client.query({query:(0,d.Ps)("\n    query($time:Int) {\n      tiTiStakingEpochDailyDatas(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n        id\n        dayStartTimestamp\n        tvl\n        apy\n        epoch{\n          id\n        }\n      }\n   }\n  "),variables:{time:(0,t.Mv)()},fetchPolicy:"network-only"})}fetchEachEpochTotalReward(n){return this.client.query({query:(0,d.Ps)("\n    query($id: ID) {\n      tiTiStakingEpoches(where: {id_lt: $id}) {\n        tvl\n        totalReward\n     }\n   }\n  "),variables:{id:n},fetchPolicy:"network-only"})}fetchVaultFund(n){return this.client.query({query:(0,d.Ps)("\n    query($id: ID,$time:Int) {\n      fundVault(id:$id) {\n        id\n        address\n        dailyBalance(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          balance\n          token{\n            symbol\n            decimals\n          }\n        }\n     }\n   }\n  "),variables:{id:n,time:(0,t.Mv)()},fetchPolicy:"network-only"})}fetchLastReOrdersData(){return this.client.query({query:(0,d.Ps)("\n    query {\n      reOrders(first: 1, orderBy: lastReordersTime, orderDirection: desc) {\n        id\n        lastReordersTime\n        reordersCondition\n        pavAmount\n      }\n   }\n  "),variables:{},fetchPolicy:"network-only"})}fetchStakingEpochOverview(n){return this.client.query({query:(0,d.Ps)("\n    query ($address:String!){\n      lpstakingEpochOverview(id:$address){\n        currentEpochNum\n      }\n   }\n  "),variables:{address:n.toLowerCase()},fetchPolicy:"network-only"})}fetchHistoricalMMFStakingEpoch(n){return this.client.query({query:(0,d.Ps)("\n    query ($epochNum:Int){\n      mmfstakingEpoches(where:{epochNum_lt:$epochNum}){\n        epochNum\n        startTimestamp\n        periodFinish\n        totalReward\n      }\n   }\n  "),variables:{epochNum:1*n},fetchPolicy:"network-only"})}fetchHistoricalLPStakingEpoch(n){return this.client.query({query:(0,d.Ps)("\n    query ($epochNum:Int){\n      lpstakingEpoches(where:{epochNum_lt:$epochNum}){\n        epochNum\n        startTimestamp\n        periodFinish\n        totalReward\n      }\n   }\n  "),variables:{epochNum:1*n},fetchPolicy:"network-only"})}fetchTiTiStakingUserRank(n,o){return this.client.query({query:(0,d.Ps)("\n    query($rank: Int,$blacklist: [String]) {\n      tiTiUserStakings(where:{id_not_in:$blacklist},orderBy: share, orderDirection: desc,first:$rank) {\n        id\n        share\n      }\n      tiTiStakings(first: 1){\n        totalAmount\n        totalShare\n      }\n   }\n  "),variables:{rank:n,blacklist:o},fetchPolicy:"network-only"})}fetchTiUSDCirculation(){const n=`\n    query {\n      tiUSD(id:"${this.chainInfoService.getChainConfig().contractAddressMap.TiUSD.toLowerCase()}") {\n        id\n        tiusdCirculation\n      }\n   }\n  `;return this.client.query({query:(0,d.Ps)(n),variables:{},fetchPolicy:"network-only"})}}return r.\u0275fac=function(n){return new(n||r)(S.LFG(k.Z))},r.\u0275prov=S.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);